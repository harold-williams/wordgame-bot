from freezegun import freeze_time
import pytest
from wordgame_bot.quordle import QourdleAttempt, QuordleAttemptParser

@freeze_time("2022, 2, 10")
@pytest.mark.parametrize(
    "attempt, expected_day, expected_score",
    [
        (
            (
                "Daily Quordle #17\n"
                "5ï¸âƒ£6ï¸âƒ£\n"
                "8ï¸âƒ£7ï¸âƒ£\n"
                "quordle.com\n"
                "ğŸŸ©ğŸŸ¨â¬œâ¬œğŸŸ¨ â¬œâ¬œğŸŸ¨â¬œğŸŸ¨\n"
                "â¬œğŸŸ¨ğŸŸ©â¬œâ¬œ â¬œğŸŸ¨â¬œâ¬œâ¬œ\n"
                "â¬œâ¬œâ¬œğŸŸ¨â¬œ â¬œâ¬œâ¬œâ¬œğŸŸ¨\n"
                "ğŸŸ¨â¬œâ¬œğŸŸ©â¬œ â¬œğŸŸ©ğŸŸ¨ğŸŸ©ğŸŸ¨\n"
                "ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ© â¬œâ¬œâ¬œğŸŸ©â¬œ\n"
                "â¬›â¬›â¬›â¬›â¬› ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©\n"
                "\n"
                "â¬œâ¬œâ¬œâ¬œğŸŸ¨ â¬œâ¬œâ¬œâ¬œâ¬œ\n"
                "â¬œğŸŸ©â¬œâ¬œğŸŸ© â¬œâ¬œâ¬œğŸŸ©â¬œ\n"
                "â¬œâ¬œâ¬œğŸŸ©â¬œ â¬œâ¬œâ¬œâ¬œâ¬œ\n"
                "â¬œâ¬œâ¬œğŸŸ¨â¬œ ğŸŸ©â¬œâ¬œâ¬œâ¬œ\n"
                "â¬œğŸŸ¨â¬œğŸŸ¨â¬œ â¬œâ¬œâ¬œâ¬œğŸŸ¨\n"
                "â¬œâ¬œâ¬œğŸŸ¨â¬œ â¬œâ¬œâ¬œâ¬œğŸŸ©\n"
                "â¬œâ¬œğŸŸ¨â¬œâ¬œ ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©\n"
                "ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ© â¬›â¬›â¬›â¬›â¬›"
            ),
            17,
            25,
        ),
        (
            (
                "Daily Quordle #17\n"
                "6ï¸âƒ£9ï¸âƒ£\n"
                "ğŸŸ¥8ï¸âƒ£\n"
                "quordle.com\n"
                "â¬œâ¬œâ¬œğŸŸ¨â¬œ â¬œâ¬œâ¬œâ¬œğŸŸ¨\n"
                "ğŸŸ¨ğŸŸ¨â¬œâ¬œâ¬œ â¬œğŸŸ¨â¬œğŸŸ¨â¬œ\n"
                "â¬œâ¬œğŸŸ¨â¬œâ¬œ â¬œğŸŸ©â¬œâ¬œâ¬œ\n"
                "â¬œâ¬œğŸŸ¨â¬œâ¬œ â¬œâ¬œâ¬œâ¬œğŸŸ©\n"
                "ğŸŸ¨ğŸŸ¨ğŸŸ©ğŸŸ©ğŸŸ¨ â¬œâ¬œâ¬œğŸŸ¨â¬œ\n"
                "ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ© â¬œâ¬œâ¬œğŸŸ¨â¬œ\n"
                "â¬›â¬›â¬›â¬›â¬› â¬œâ¬œâ¬œâ¬œğŸŸ¨\n"
                "â¬›â¬›â¬›â¬›â¬› â¬œğŸŸ¨â¬œğŸŸ¨â¬œ\n"
                "â¬›â¬›â¬›â¬›â¬› ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©\n"
                "\n"
                "â¬œâ¬œğŸŸ¨â¬œâ¬œ â¬œâ¬œâ¬œğŸŸ¨â¬œ\n"
                "â¬œğŸŸ¨â¬œâ¬œğŸŸ¨ â¬œğŸŸ¨ğŸŸ¨ğŸŸ¨â¬œ\n"
                "â¬œâ¬œâ¬œâ¬œâ¬œ â¬œâ¬œâ¬œâ¬œâ¬œ\n"
                "â¬œâ¬œâ¬œğŸŸ¨â¬œ â¬œğŸŸ©â¬œâ¬œâ¬œ\n"
                "â¬œâ¬œâ¬œğŸŸ¨â¬œ â¬œğŸŸ¨â¬œğŸŸ©â¬œ\n"
                "â¬œâ¬œâ¬œğŸŸ¨â¬œ ğŸŸ¨â¬œâ¬œğŸŸ©â¬œ\n"
                "â¬œâ¬œâ¬œâ¬œâ¬œ ğŸŸ©ğŸŸ¨â¬œğŸŸ¨â¬œ\n"
                "â¬œâ¬œâ¬œğŸŸ¨â¬œ ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©\n"
                "â¬œâ¬œğŸŸ©â¬œâ¬œ â¬›â¬›â¬›â¬›â¬›"
            ),
            17,
            16,
        ),
        (
            (
                "Daily Quordle #17\n"
                "4ï¸âƒ£ğŸŸ¥\n"
                "5ï¸âƒ£8ï¸âƒ£\n"
                "quordle.com\n"
                "ğŸŸ¨â¬œâ¬œğŸŸ©ğŸŸ© â¬œâ¬œâ¬œâ¬œğŸŸ¨\n"
                "â¬œğŸŸ¨â¬œâ¬œğŸŸ¨ ğŸŸ©ğŸŸ¨â¬œğŸŸ¨ğŸŸ©\n"
                "ğŸŸ©ğŸŸ©â¬œâ¬œâ¬œ â¬œğŸŸ¨â¬œâ¬œğŸŸ¨\n"
                "ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ© â¬œğŸŸ¨â¬œâ¬œğŸŸ¨\n"
                "â¬›â¬›â¬›â¬›â¬› â¬œâ¬œâ¬œâ¬œâ¬œ\n"
                "â¬›â¬›â¬›â¬›â¬› â¬œğŸŸ©ğŸŸ¨ğŸŸ©â¬œ\n"
                "â¬›â¬›â¬›â¬›â¬› â¬œğŸŸ¨ğŸŸ¨â¬œâ¬œ\n"
                "â¬›â¬›â¬›â¬›â¬› â¬œğŸŸ¨ğŸŸ¨â¬œâ¬œ\n"
                "â¬›â¬›â¬›â¬›â¬› ğŸŸ©ğŸŸ©â¬œğŸŸ©ğŸŸ©\n"
                "\n"
                "ğŸŸ¨â¬œâ¬œâ¬œâ¬œ â¬œâ¬œâ¬œâ¬œğŸŸ¨\n"
                "â¬œâ¬œâ¬œâ¬œâ¬œ â¬œğŸŸ©ğŸŸ¨ğŸŸ¨â¬œ\n"
                "ğŸŸ¨â¬œğŸŸ¨â¬œâ¬œ â¬œâ¬œâ¬œâ¬œâ¬œ\n"
                "ğŸŸ¨â¬œğŸŸ©â¬œâ¬œ â¬œâ¬œâ¬œâ¬œğŸŸ¨\n"
                "ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ© â¬œâ¬œâ¬œâ¬œâ¬œ\n"
                "â¬›â¬›â¬›â¬›â¬› â¬œğŸŸ¨â¬œğŸŸ¨ğŸŸ¨\n"
                "â¬›â¬›â¬›â¬›â¬› â¬œğŸŸ©â¬œğŸŸ©ğŸŸ©\n"
                "â¬›â¬›â¬›â¬›â¬› ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©ğŸŸ©"
            ),
            17,
            22,
        ),
    ]
)
def test_parse_valid_attempts(attempt: str, expected_score: int, expected_day: int):
    parser = QuordleAttemptParser(attempt)
    parsed_attempt = parser.parse()
    assert isinstance(parsed_attempt, QourdleAttempt)
    assert parsed_attempt.info.day == expected_day
    assert parsed_attempt.score == expected_score
